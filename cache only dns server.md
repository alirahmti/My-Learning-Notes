# ๐ง ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ DNS ฺฉุด (Cache-Only) ุจุง BIND ุฑู Ubuntu 22.04

ุงู ุฑุงูููุง ุจูุช ุงุฏ ูโุฏู ฺุทูุฑ ู ุณุฑูุฑ DNS ุฏุงุฎู ุฑุงู ุจูุฏุงุฒ ฺฉู ููุท ฺฉุด ฺฉูู ู ุฎูุฏุด ูฺ ุฏุงูููโุง ุฑู ูุฏุฑุช ูฺฉูู.

---

## โ Cache-Only DNS Server ฺูุ

๐ข ู ุณุฑูุฑู ฺฉู ููุท ฺฉุงุฑุด ุงูู:
- ุฏุฑุฎูุงุณุชโูุง DNS ฺฉูุงูุชโูุง ุฑู ุจฺฏุฑู
- ุจุฑู ุงุฒ DNSูุง ุนููู (ูุซูุงู ฺฏูฺฏู) ุฌูุงุจ ุจฺฏุฑู
- ู ุงูู ุฌูุงุจ ุฑู ุชู ุญุงูุธู ูฺฏูโุฏุงุฑู ุชุง ุณุฑ ุจุนุฏ ุณุฑุนโุชุฑ ุฌูุงุจ ุจุฏู

**ูฺ ุฏุงูููโุง ุฑู ูุฏุฑุช ููโฺฉูู**ุ ููุท ููุด ูุงุณุทู ู ุญุงูุธู ุฏุงุฑู.

---

## ๐งฐ ฺู ุฒูุงู ุจูุด ูุงุฒ ุฏุงุฑูุ

- ุชู ุดุจฺฉู ุฏุงุฎู ูุซู ุดุฑฺฉุช ุง ุฏุงูุดฺฏุงู
- ุจุฑุง ฺฉุงูุด ุชุฑุงูฺฉ ุงูุชุฑูุช
- ุงูุฒุงุด ุณุฑุนุช ููุฏ ุตูุญุงุช
- ุจุงูุง ุจุฑุฏู ุงููุช (ฺฉูุงูุชโูุง ูุณุชูู ุจู DNS ุจุฑูู ูุตู ููโุดู)
- ูุงูุชูุฑ ฺฉุฑุฏู ุฏุฑุฎูุงุณุชโูุง

---

## ๐๏ธ ูุตุจ BIND ุฑู Ubuntu 22.04

```bash
sudo apt update
sudo apt install bind9 bind9utils bind9-doc dnsutils -y
````

---

## โ๏ธ ุชูุธูุงุช ุงุตู

ูุงู: `/etc/bind/named.conf.options`

ุชูุธูุงุช ฺฉู ุจุงุฏ ุงูุฌุงู ุจุฏ:

* ุฑูุดู ฺฉุฑุฏู recursion
* ูุดุฎุต ฺฉุฑุฏู DNSูุง ุฎุงุฑุฌ (ูุซู 8.8.8.8)
* ูุญุฏูุฏ ฺฉุฑุฏู ุฏุณุชุฑุณ ููุท ุจู ุดุจฺฉู ุฏุงุฎู (ACL)
* ุงูุชุฎุงุจ ูพูุฑุช ู IP ุจุฑุง ฺฏูุด ุฏุงุฏู (listen-on)

---

## ๐ ูุตู ฺฉุฑุฏู ฺฉูุงูุชโูุง ุจู DNS ุฏุงุฎู

### ุฑูุด 1: ุฏุณุช ุฑู ูุฑ ุณุณุชู

ูุงุฑุฏ ุชูุธูุงุช ุดุจฺฉู ุดู ู ุขุฏุฑุณ DNS ุฑู ุจุฐุงุฑ ุฑู ุขโูพ ุณุฑูุฑุช (ูุซูุงู 192.168.1.100)

### ุฑูุด 2: ุงุฒ ุทุฑู DHCP

ุชู ุชูุธูุงุช DHCP (ููุฏู ุง ุฑูุชุฑ) ููุฏุงุฑ DNS ุฑู ุจุฐุงุฑ ุฑู IP ุณุฑูุฑ ฺฉุด

---

## ๐ ูุนุงูโุณุงุฒ ูุงฺฏโฺฏุฑ

### ูุฑุญูู 1: ุงุถุงูู ฺฉุฑุฏู ูุงฺฏ ุจู `/etc/bind/named.conf`

```conf
logging {
    channel query_log {
        file "/var/log/named_query.log";
        severity info;
        print-time yes;
    };
    category queries { query_log; };
};
```

### ูุฑุญูู 2: ุณุงุฎุช ูุงู ูุงฺฏ ู ุฑุณุชุงุฑุช BIND

```bash
sudo touch /var/log/named_query.log
sudo chown bind:bind /var/log/named_query.log
sudo systemctl restart bind9
```

### ุฏุฏู ูุงฺฏโูุง:

```bash
tail -f /var/log/named_query.log
```

---

## ๐ก๏ธ ูฺฉุงุช ุงููุช

* ููุท ุดุจฺฉู ุฏุงุฎู ุงุฌุงุฒู ุฏุฑุฎูุงุณุช ุฏุงุดุชู ุจุงุดู (ุจุง ACL)
* ุงุฒ ุงุจุฒุงุฑูุง ูุซู `iptables` ุง `fail2ban` ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุญููู ุงุณุชูุงุฏู ฺฉู
* ูุงฺฏโูุง ุฑู ูุฑุชุจ ุจุฑุฑุณ ฺฉู ุชุง ุจุจู ฺู ุฏุงูููโูุง ุจุดุชุฑ ูพุฑุณุฏู ูโุดู

---

## ๐ ุชุณุช ุนููฺฉุฑุฏ ุณุฑูุฑ

```bash
dig @192.168.1.100 google.com
```

ุงฺฏู ูููโฺ ุฏุฑุณุช ุจุงุดูุ ุจุงุฑ ุฏูู ุฎู ุณุฑุนโุชุฑ ุฌูุงุจ ูโุฏู โ

---

